# データベースマイグレーション

このフォルダには、既存のデータベースに変更を加えるマイグレーションスクリプトが含まれています。

## ファイル一覧

### add_role_column.py

users テーブルに role カラムを追加するマイグレーションスクリプト

**使用方法:**

```bash
cd backend/migrations
python add_role_column.py
```

**機能:**

- users テーブルに role カラム追加（TINYINT, DEFAULT 2）
- role カラムにインデックス追加
- テーブル構造確認

**ロール定義:**

- 1: 管理者
- 2: 一般ユーザー（デフォルト）

**対応環境:**

- ローカル開発環境
- AWS RDS 環境

## マイグレーション実行時の注意事項

1. **バックアップ**: 本番環境では事前にデータベースのバックアップを取得してください
2. **テスト**: ローカル環境で十分にテストしてから本番環境で実行してください
3. **ダウンタイム**: マイグレーション中はアプリケーションを停止することを推奨します
4. **ロールバック**: 問題が発生した場合のロールバック手順を事前に準備してください

## 今後のマイグレーション追加時

新しいマイグレーションファイルを追加する際は、以下の命名規則に従ってください：

```
YYYY_MM_DD_HH_MM_description.py
```

例：

- `2024_01_15_10_30_add_role_column.py`
- `2024_01_20_14_45_add_user_profile_table.py`
